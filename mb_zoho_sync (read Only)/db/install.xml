<?xml version="1.0" encoding="UTF-8" ?>
<XMLDB PATH="local/mb_zoho_sync/db" VERSION="2025041300" COMMENT="Install tables for MB Zoho Sync plugin"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../lib/xmldb/xmldb.xsd">

  <TABLES>

    <TABLE NAME="financeinfo" COMMENT="General student financial info">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true"/>
        <FIELD NAME="scholarship" TYPE="char" LENGTH="50"/>
        <FIELD NAME="scholarship_reason" TYPE="text"/>
        <FIELD NAME="scholarship_percentage" TYPE="number" LENGTH="5" DECIMALS="2"/>
        <FIELD NAME="currency" TYPE="char" LENGTH="10"/>
        <FIELD NAME="amount_transferred" TYPE="number" LENGTH="10" DECIMALS="2"/>
        <FIELD NAME="payment_method" TYPE="char" LENGTH="50"/>
        <FIELD NAME="payment_mode" TYPE="char" LENGTH="50"/>
        <FIELD NAME="bank_name" TYPE="char" LENGTH="100"/>
        <FIELD NAME="bank_holder" TYPE="char" LENGTH="100"/>
        <FIELD NAME="registration_fees" TYPE="number" LENGTH="10" DECIMALS="2"/>
        <FIELD NAME="invoice_reg_fees" TYPE="char" LENGTH="50"/>
        <FIELD NAME="reg_fees_date" TYPE="int" LENGTH="10"/>
        <FIELD NAME="total_amount" TYPE="number" LENGTH="10" DECIMALS="2"/>
        <FIELD NAME="discount_amount" TYPE="number" LENGTH="10" DECIMALS="2"/>
        <FIELD NAME="zoho_id" TYPE="char" LENGTH="50"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
      </KEYS>
    </TABLE>

    <TABLE NAME="financeinfo_payments" COMMENT="Student payment records">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="financeinfoid" TYPE="int" LENGTH="10" NOTNULL="true"/>
        <FIELD NAME="payment_name" TYPE="char" LENGTH="50"/>
        <FIELD NAME="amount" TYPE="number" LENGTH="10" DECIMALS="2"/>
        <FIELD NAME="payment_date" TYPE="int" LENGTH="10"/>
        <FIELD NAME="invoice_number" TYPE="char" LENGTH="50"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
        <KEY NAME="financeinfo_fk" TYPE="foreign" FIELDS="financeinfoid" REFTABLE="financeinfo" REFFIELDS="id"/>
      </KEYS>
    </TABLE>

    <TABLE NAME="sync_sharepoint" COMMENT="Stores SharePoint links for synced Teams">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
        <FIELD NAME="courseid" TYPE="int" LENGTH="10" NOTNULL="true"/>
        <FIELD NAME="teamname" TYPE="char" LENGTH="255" NOTNULL="true"/>
        <FIELD NAME="objectid" TYPE="char" LENGTH="100" NOTNULL="true"/>
        <FIELD NAME="status" TYPE="char" LENGTH="50" NOTNULL="true"/>
        <FIELD NAME="sharepointurl" TYPE="text"/>
        <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
      </KEYS>
    </TABLE>

  </TABLES>
</XMLDB>
